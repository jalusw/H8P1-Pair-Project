<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <%- include("../partials/meta.ejs") %>
    <title><%= title %></title>
  </head>

  <body>
    <%- include("../layouts/navbar.ejs") %> <%-
    include("../layouts/search-bar.ejs") %>
    <main>
      <div class="container py-5">
        <div class="row">
          <div class="col-sm-12 col-md-6 mb-4">
            <img
              class="rounded col-12 bg-secondary"
              src="<%= product.image %>"
              alt=""
              height="350"
              style="object-fit: cover"
            />
          </div>
          <div class="col-sm-12 col-md-6">
            <h1 class="h1"><%= product.name %></h1>
            <p class="text-muted"><%= product.Category.name %></p>
            <p class="h2"><%= product.priceInRupiah %></p>

            <p class="mt-4">Only <%= product.stock %> left</p>

            <button
              type="button"
              class="btn btn-primary"
              data-bs-toggle="modal"
              data-bs-target="#cart-modal"
            >
              <i class="bi bi-cart"></i>
              Add to cart
            </button>
          </div>
          <div class="col-12 mt-4">
            <strong>Description</strong>
            <p><%= product.description %></p>
          </div>
        </div>
      </div>
    </main>
    <%- include("../partials/scripts.ejs") %> 
    <%- include("../partials/sweet-alert.ejs") %> 
    <%- include("../layouts/footer.ejs") %>

    <div
      class="modal fade"
      id="cart-modal"
      data-bs-backdrop="static"
      data-bs-keyboard="false"
      aria-hidden="true"
    >
      <div class="modal-dialog">
        <div class="modal-content">
          <form action="/cart" method="POST">
          <input type="hidden" name="ProductId" value="<%= product.id %>">
            <div class="modal-header">
              <h1 class="modal-title fs-5" id="staticBackdropLabel">
                Add to my cart
              </h1>
              <button
                type="button"
                class="btn-close"
                data-bs-dismiss="modal"
                aria-label="Close"
              ></button>
            </div>
            <div class="modal-body">
              <div>
                <label for="quantity">Quantity</label>
                <input name="quantity" type="number" class="form-control" placeholder="0">
              </div>
              <div class="mt-3">
                <label for="notes">Note</label>
                <textarea class="form-control" name="notes" id="notes" placeholder="Drop us a note! ..."></textarea>
              </div>
            </div>
            <div class="modal-footer">
              <button
                type="button"
                class="btn btn-secondary"
                data-bs-dismiss="modal"
              >
                Close
              </button>
              <button  class="btn btn-primary" type="submit">Add</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </body>
</html>
